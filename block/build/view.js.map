{"version":3,"file":"view.js","mappings":";;;;AAAAA,QAAQ,CAACC,gBAAgB,CAAC,gCAAgC,CAAC,CAACC,OAAO,CAAEC,GAAG,IAAK;EAC5E,MAAMC,KAAK,GAAGD,GAAG,CAACF,gBAAgB,CAAC,GAAG,CAAC;EACvC,MAAMI,GAAG,GAAG,CAAC,GAAGD,KAAK,CAAC,CAACE,GAAG,CAACC,IAAI,IAAI,IAAIC,GAAG,CAACD,IAAI,CAACE,IAAI,CAAC,CAACC,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC,CAAC;;EAExE;EACA,MAAMC,QAAQ,GAAG,CAAE,GAAGP,GAAG,CAACC,GAAG,CAAEO,EAAE,IAAIb,QAAQ,CAACc,cAAc,CAAED,EAAG,CAAE,CAAC,CAAE,CAACE,OAAO,CAAC,CAAC;EAChF,MAAMC,UAAU,GAAGJ,QAAQ,CAACN,GAAG,CAACW,OAAO,IAAIA,OAAO,CAACC,qBAAqB,CAAC,CAAC,CAACC,GAAG,CAAC;EAC/E,IAAIC,gBAAgB,GAAGC,QAAQ;;EAE/B;EACAC,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAE,MAAM;IACvCC,qBAAqB,CAAC,MAAM;MAC3B,MAAMC,SAAS,GAAGzB,QAAQ,CAAC0B,eAAe,CAACD,SAAS;MACpD,MAAME,YAAY,GAAGL,MAAM,CAACM,WAAW;MACvC,IAAIC,SAAS,GAAGR,QAAQ;MAExB,KAAK,IAAIS,YAAY,IAAId,UAAU,EAAE;QACpC,IAAIc,YAAY,IAAIL,SAAS,GAAIE,YAAY,GAAG,CAAE,EAAE;UACnDE,SAAS,GAAGC,YAAY;UACxB;QACD;MACD;MAEA,IAAID,SAAS,KAAKT,gBAAgB,EAAE;QACnC;MACD;MAEAA,gBAAgB,GAAGS,SAAS;MAE5B,MAAMZ,OAAO,GAAGL,QAAQ,CAACI,UAAU,CAACe,OAAO,CAACX,gBAAgB,CAAC,CAAC;MAC9D,MAAMY,SAAS,GAAGf,OAAO,CAACgB,YAAY,CAAC,IAAI,CAAC;MAC5C,MAAM1B,IAAI,GAAGJ,GAAG,CAAC+B,aAAa,CAAC,YAAYF,SAAS,IAAI,CAAC;MAEzD,IAAI,CAACzB,IAAI,EAAE;QACV;MACD;MAEAH,KAAK,CAACF,OAAO,CAAEiC,GAAG,IAAKA,GAAG,CAACC,aAAa,CAACC,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC,CAAC;MACpE/B,IAAI,CAAC6B,aAAa,CAACC,SAAS,CAACE,GAAG,CAAC,QAAQ,CAAC;IAC3C,CAAC,CAAC;EACH,CAAC,EAAE;IAAEC,OAAO,EAAE;EAAK,CAAC,CAAC;AACtB,CAAC,CAAC,C","sources":["webpack://hm-table-of-contents-plugin/./block/src/view.js"],"sourcesContent":["document.querySelectorAll('.hm-toc, .hm-table-of-contents').forEach((toc) => {\n\tconst links = toc.querySelectorAll('a');\n\tconst ids = [...links].map(link => new URL(link.href).hash.substring(1));\n\n\t// Cycle backwards through top offsets to get nearest segment.\n\tconst headings = [ ...ids.map( id => document.getElementById( id ) ) ].reverse();\n\tconst thresholds = headings.map(heading => heading.getBoundingClientRect().top);\n\tlet currentThreshold = Infinity;\n\n\t// Highlight the heading section we are most 'in', regardless of scroll direction.\n\twindow.addEventListener('scroll', () => {\n\t\trequestAnimationFrame(() => {\n\t\t\tconst scrollTop = document.documentElement.scrollTop;\n\t\t\tconst windowHeight = window.innerHeight;\n\t\t\tlet threshold = Infinity;\n\n\t\t\tfor (let newThreshold of thresholds) {\n\t\t\t\tif (newThreshold <= scrollTop + (windowHeight / 2)) {\n\t\t\t\t\tthreshold = newThreshold;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (threshold === currentThreshold) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcurrentThreshold = threshold;\n\n\t\t\tconst heading = headings[thresholds.indexOf(currentThreshold)];\n\t\t\tconst headingId = heading.getAttribute('id');\n\t\t\tconst link = toc.querySelector(`a[href=\"#${headingId}\"]`);\n\n\t\t\tif (!link) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlinks.forEach((lnk) => lnk.parentElement.classList.remove('active'));\n\t\t\tlink.parentElement.classList.add('active');\n\t\t});\n\t}, { passive: true });\n});\n"],"names":["document","querySelectorAll","forEach","toc","links","ids","map","link","URL","href","hash","substring","headings","id","getElementById","reverse","thresholds","heading","getBoundingClientRect","top","currentThreshold","Infinity","window","addEventListener","requestAnimationFrame","scrollTop","documentElement","windowHeight","innerHeight","threshold","newThreshold","indexOf","headingId","getAttribute","querySelector","lnk","parentElement","classList","remove","add","passive"],"sourceRoot":""}